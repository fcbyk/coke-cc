# 数组

---

<CCollapseGroup>

<CCollapse title="什么是数组？">

> 1. 数组是相同类型元素的集合
> 2. 数组元素在内存中连续存储
> 3. 通过索引访问数组元素

**数组** 是一种数据结构，用于存储固定大小的相同类型元素的顺序集合。数组中的每个元素都可以通过数字索引来访问。

关键点：
1. 数组大小在创建时确定且不可改变
2. 数组索引从0开始
3. 数组元素在内存中是连续存储的
4. 数组名代表数组首元素的地址

<template #extra>
    <CBadge text="基础概念" variant="outline" color="#ff4d4f" />
</template>
</CCollapse>

<CCollapse title="如何声明和初始化数组？">

- 声明语法：`数据类型 数组名[大小]`
- 初始化可以在声明时进行
- 可以部分初始化，未初始化的元素自动设为0

```cpp
// 声明后逐个初始化
int nums[3];
nums[0] = 1;
nums[1] = 2;
nums[2] = 3;

// 声明时初始化
double prices[5] = {10.5, 20.0, 30.25};

// 自动确定数组大小
char letters[] = {'a', 'b', 'c'};  // 大小为3

// C++11统一初始化
int arr[] {1, 2, 3};
```

<template #extra>
    <CBadge text="重点" variant="outline" color="#ff4d4f" />
</template>
</CCollapse>

<CCollapse title="如何访问数组元素？">

数组元素通过索引访问，索引范围从0到数组大小-1

```cpp
int scores[5] = {85, 90, 78, 92, 88};

// 访问单个元素
int firstScore = scores[0];  // 85
int thirdScore = scores[2];  // 78

// 修改元素值
scores[1] = 95;  // 将第二个元素改为95

// 遍历数组
for (int i = 0; i < 5; i++) {
    cout << scores[i] << " ";
}
```

注意：访问越界会导致未定义行为

</CCollapse>

<CCollapse title="什么是多维数组？">

多维数组是数组的数组，最常见的是二维数组

```cpp
// 二维数组声明和初始化
int matrix[2][3] = {
    {1, 2, 3},
    {4, 5, 6}
};

// 访问元素
int val = matrix[1][2];  // 6

// 三维数组示例
int cube[2][3][4];
```

<template #extra>
    <CBadge text="进阶" variant="outline" color="#52c41aff" />
</template>
</CCollapse>

<CCollapse title="数组和指针有什么关系？">

数组名在大多数情况下会退化为指向数组首元素的指针

```cpp
int arr[5] = {10, 20, 30, 40, 50};
int* ptr = arr;  // 等价于 &arr[0]

// 指针算术访问数组元素
cout << *(ptr + 2);  // 30，等价于arr[2]

// 数组名和指针的区别
cout << sizeof(arr);  // 整个数组大小（如20字节）
cout << sizeof(ptr);  // 指针大小（如8字节）
```

</CCollapse>

<CCollapse title="什么是动态数组？">

动态数组是在运行时分配内存的数组，使用`new`和`delete`操作符

```cpp
// 创建动态数组
int size = 10;
int* dynArr = new int[size];

// 使用动态数组
for (int i = 0; i < size; i++) {
    dynArr[i] = i * 2;
}

// 释放内存
delete[] dynArr;
```

更推荐使用`std::vector`代替原始动态数组

<template #extra>
    <CBadge text="重点" variant="outline" color="#ff4d4f" />
</template>
</CCollapse>

<CCollapse title="数组作为函数参数如何传递？">

数组作为函数参数时，实际传递的是指针

```cpp
// 三种等效的函数声明方式
void printArray(int arr[], int size);
void printArray(int* arr, int size);
void printArray(int arr[5], int size);  // 5会被忽略

// 函数实现
void printArray(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
}

// 调用
int nums[] = {1, 2, 3, 4, 5};
printArray(nums, 5);
```

</CCollapse>

<CCollapse title="什么是数组越界？如何避免？">

数组越界是指访问数组时使用了超出有效范围的索引

```cpp
int arr[3] = {1, 2, 3};
int x = arr[3];  // 越界访问，未定义行为
```

避免方法：
1. 始终检查索引范围
2. 使用范围for循环(C++11)
3. 使用标准库容器如`std::vector`和`std::array`

```cpp
// 安全遍历
int arr[] = {1, 2, 3};
for (int num : arr) {
    cout << num << " ";
}
```

<template #extra>
    <CBadge text="安全" variant="outline" color="#52c41aff" />
</template>
</CCollapse>

<CCollapse title="C++标准库提供了哪些数组替代品？">

| 容器 | 特点 | 适用场景 |
|------|------|----------|
| `std::array` | 固定大小，栈分配 | 替代原始数组 |
| `std::vector` | 动态大小，堆分配 | 需要动态调整大小 |
| `std::valarray` | 数值计算优化 | 数学运算 |

```cpp
#include <array>
#include <vector>

// std::array示例
std::array<int, 5> arr = {1, 2, 3, 4, 5};

// std::vector示例
std::vector<int> vec = {10, 20, 30};
vec.push_back(40);
```

<template #extra>
    <CBadge text="现代C++" variant="outline" color="#52c41aff" />
</template>
</CCollapse>

</CCollapseGroup>