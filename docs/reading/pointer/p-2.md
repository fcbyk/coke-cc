## 02 分析错误

分析以下简单的指针代码，有错误吗？如有错误，请指出其中的错误。

::: code-group

```cpp [代码1]
#include <iostream>
using namespace std;

int main() {
    int num = 100;
    int *p;
    p = num;
    cout << *p << endl;
    return 0;
}
```

```cpp [代码2]
#include <iostream>
using namespace std;

int main() {
    int a = 5;
    int *p = &a;
    cout << p << endl;
    return 0;
}
```

```cpp [代码3]
#include <iostream>
using namespace std;

int main() {
    int x = 3;
    int *p = x;
    cout << *p << endl;
    return 0;
}
```

```cpp [代码4]
#include <iostream>
using namespace std;

int main() {
    int arr[] = {1,2,3};
    int *p = arr;
    cout << *p << endl;
    return 0;
}
```
:::

##### 答案（同学们也可以编译运行，进行验证）

<PasswordProtected>

::: code-group

```cpp [代码1]
#include <iostream>
using namespace std;

int main() {
    int num = 100;
    int *p; // [!code error]
    p = num; // [!code error]
    cout << *p << endl;
    return 0;
}

/**
错误解释：
使用未初始化的指针（野指针）
指针p应该存储地址，而不是直接存储值。
正确写法：int *p = &num;
*/
```

```cpp [代码2]
#include <iostream>
using namespace std;

int main() {
    int a = 5;
    int *p = &a;
    cout << p << endl;
    return 0;
}

/**
当前代码无错误：
输出的是变量a的内存地址
*/
```

```cpp [代码3]
#include <iostream>
using namespace std;

int main() {
    int x = 3;
    int *p = x; // [!code error]
    cout << *p << endl;
    return 0;
}

/**
错误解释：
指针初始化错误，应该用地址初始化指针。
正确写法：int *p = &x;
*/
```

```cpp [代码4]
#include <iostream>
using namespace std;

int main() {
    int arr[] = {1,2,3};
    int *p = arr;
    cout << *p << endl;
    return 0;
}

/**
当前代码无错误：
数组名就是数组首地址，*p输出第一个元素1
*/
```
:::

</PasswordProtected>